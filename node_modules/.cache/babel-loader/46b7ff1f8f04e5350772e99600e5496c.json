{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { Component } from 'react';\nimport { defaultProps } from '../../default-props';\nimport { FormContext } from './FormContext';\n\nvar updateReducer = function updateReducer(name, data, error, validations) {\n  return function (state) {\n    var errors = state.errors,\n        touched = state.touched,\n        value = state.value;\n\n    var nextValue = _extends({}, value);\n\n    nextValue[name] = data;\n\n    var nextTouched = _extends({}, touched);\n\n    nextTouched[name] = true;\n\n    var nextErrors = _extends({}, errors);\n\n    if (errors[name]) {\n      var nextError = error || validations[name] && validations[name](data, nextValue);\n\n      if (nextError) {\n        nextErrors[name] = nextError;\n      } else {\n        delete nextErrors[name];\n      }\n    }\n\n    return {\n      value: nextValue,\n      errors: nextErrors,\n      touched: nextTouched\n    };\n  };\n};\n\nvar defaultMessages = {\n  invalid: 'invalid',\n  required: 'required'\n};\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Form, _Component);\n\n  function Form() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      errors: {},\n      value: {},\n      touched: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"validations\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      var onSubmit = _this.props.onSubmit;\n      var _this$state = _this.state,\n          errors = _this$state.errors,\n          value = _this$state.value; // Don't submit the form via browser form action. We don't want it\n      // if the validation fails. And, we assume a javascript action handler\n      // otherwise.\n\n      event.preventDefault();\n\n      var nextErrors = _extends({}, errors);\n\n      Object.keys(_this.validations).forEach(function (name) {\n        var validate = _this.validations[name];\n        var error = validate && validate(value[name], value);\n\n        if (error) {\n          nextErrors[name] = error;\n        } else {\n          delete nextErrors[name];\n        }\n      });\n\n      if (Object.keys(nextErrors).length === 0 && onSubmit) {\n        event.persist(); // extract from React's synthetic event pool\n\n        var adjustedEvent = event;\n        adjustedEvent.value = value;\n        onSubmit(adjustedEvent);\n      } else {\n        _this.setState({\n          errors: nextErrors\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onReset = _this$props.onReset;\n      var value = {};\n\n      _this.setState({\n        errors: {},\n        value: value,\n        touched: {}\n      }, function () {\n        if (onReset) {\n          event.persist(); // extract from React's synthetic event pool\n\n          var adjustedEvent = event;\n          adjustedEvent.value = value;\n          onReset(adjustedEvent);\n        }\n\n        if (onChange) {\n          onChange(value);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function (name, data, error) {\n      _this.setState(updateReducer(name, data, error, _this.validations), function () {\n        var onChange = _this.props.onChange;\n        var value = _this.state.value;\n\n        if (onChange) {\n          onChange(value);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addValidation\", function (name, validate) {\n      _this.validations[name] = validate;\n    });\n\n    return _this;\n  }\n\n  Form.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        errors = nextProps.errors,\n        messages = nextProps.messages;\n    var stateValue = prevState.value,\n        stateErrors = prevState.errors,\n        priorValue = prevState.priorValue,\n        priorErrors = prevState.priorErrors,\n        priorMessages = prevState.priorMessages;\n\n    if (!priorValue || value !== priorValue || errors !== priorErrors || messages !== priorMessages) {\n      return {\n        value: value !== priorValue ? value : stateValue,\n        priorValue: value,\n        errors: (errors !== priorErrors ? errors : stateErrors) || {},\n        priorErrors: errors,\n        messages: _extends({}, defaultMessages, {}, messages),\n        priorMessages: messages\n      };\n    }\n\n    return null;\n  };\n\n  var _proto = Form.prototype;\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"children\"]);\n\n    delete rest.messages;\n    delete rest.theme;\n    delete rest.value;\n    var _this$state2 = this.state,\n        errors = _this$state2.errors,\n        touched = _this$state2.touched,\n        value = _this$state2.value,\n        messages = _this$state2.messages;\n    return React.createElement(\"form\", _extends({}, rest, {\n      onReset: this.onReset,\n      onSubmit: this.onSubmit\n    }), React.createElement(FormContext.Provider, {\n      value: {\n        addValidation: this.addValidation,\n        errors: errors,\n        messages: messages,\n        touched: touched,\n        update: this.update,\n        value: value\n      }\n    }, children));\n  };\n\n  return Form;\n}(Component);\n\n_defineProperty(Form, \"defaultProps\", {\n  messages: defaultMessages,\n  value: {}\n});\n\nObject.setPrototypeOf(Form.defaultProps, defaultProps);\nvar FormDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  FormDoc = require('./doc').doc(Form); // eslint-disable-line global-require\n}\n\nvar FormWrapper = FormDoc || Form;\nFormWrapper.displayName = 'Form';\nexport { FormWrapper as Form };","map":{"version":3,"sources":["C:/Users/ruxan/OneDrive/Desktop/UPM/Website/go_bananas/node_modules/grommet/es6/components/Form/Form.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","_extends","assign","arguments","hasOwnProperty","call","apply","React","Component","defaultProps","FormContext","updateReducer","name","data","error","validations","state","errors","touched","nextValue","nextTouched","nextErrors","nextError","defaultMessages","invalid","required","Form","_Component","_this","_len","args","Array","_key","concat","event","onSubmit","props","_this$state","preventDefault","forEach","validate","persist","adjustedEvent","setState","_this$props","onChange","onReset","getDerivedStateFromProps","nextProps","prevState","messages","stateValue","stateErrors","priorValue","priorErrors","priorMessages","_proto","render","_this$props2","children","rest","theme","_this$state2","createElement","Provider","addValidation","update","setPrototypeOf","FormDoc","process","env","NODE_ENV","require","doc","FormWrapper","displayName"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport { defaultProps } from '../../default-props';\nimport { FormContext } from './FormContext';\n\nvar updateReducer = function updateReducer(name, data, error, validations) {\n  return function (state) {\n    var errors = state.errors,\n        touched = state.touched,\n        value = state.value;\n\n    var nextValue = _extends({}, value);\n\n    nextValue[name] = data;\n\n    var nextTouched = _extends({}, touched);\n\n    nextTouched[name] = true;\n\n    var nextErrors = _extends({}, errors);\n\n    if (errors[name]) {\n      var nextError = error || validations[name] && validations[name](data, nextValue);\n\n      if (nextError) {\n        nextErrors[name] = nextError;\n      } else {\n        delete nextErrors[name];\n      }\n    }\n\n    return {\n      value: nextValue,\n      errors: nextErrors,\n      touched: nextTouched\n    };\n  };\n};\n\nvar defaultMessages = {\n  invalid: 'invalid',\n  required: 'required'\n};\n\nvar Form =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Form, _Component);\n\n  function Form() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      errors: {},\n      value: {},\n      touched: {}\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"validations\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"onSubmit\", function (event) {\n      var onSubmit = _this.props.onSubmit;\n      var _this$state = _this.state,\n          errors = _this$state.errors,\n          value = _this$state.value; // Don't submit the form via browser form action. We don't want it\n      // if the validation fails. And, we assume a javascript action handler\n      // otherwise.\n\n      event.preventDefault();\n\n      var nextErrors = _extends({}, errors);\n\n      Object.keys(_this.validations).forEach(function (name) {\n        var validate = _this.validations[name];\n        var error = validate && validate(value[name], value);\n\n        if (error) {\n          nextErrors[name] = error;\n        } else {\n          delete nextErrors[name];\n        }\n      });\n\n      if (Object.keys(nextErrors).length === 0 && onSubmit) {\n        event.persist(); // extract from React's synthetic event pool\n\n        var adjustedEvent = event;\n        adjustedEvent.value = value;\n        onSubmit(adjustedEvent);\n      } else {\n        _this.setState({\n          errors: nextErrors\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onReset\", function (event) {\n      var _this$props = _this.props,\n          onChange = _this$props.onChange,\n          onReset = _this$props.onReset;\n      var value = {};\n\n      _this.setState({\n        errors: {},\n        value: value,\n        touched: {}\n      }, function () {\n        if (onReset) {\n          event.persist(); // extract from React's synthetic event pool\n\n          var adjustedEvent = event;\n          adjustedEvent.value = value;\n          onReset(adjustedEvent);\n        }\n\n        if (onChange) {\n          onChange(value);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function (name, data, error) {\n      _this.setState(updateReducer(name, data, error, _this.validations), function () {\n        var onChange = _this.props.onChange;\n        var value = _this.state.value;\n\n        if (onChange) {\n          onChange(value);\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"addValidation\", function (name, validate) {\n      _this.validations[name] = validate;\n    });\n\n    return _this;\n  }\n\n  Form.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var value = nextProps.value,\n        errors = nextProps.errors,\n        messages = nextProps.messages;\n    var stateValue = prevState.value,\n        stateErrors = prevState.errors,\n        priorValue = prevState.priorValue,\n        priorErrors = prevState.priorErrors,\n        priorMessages = prevState.priorMessages;\n\n    if (!priorValue || value !== priorValue || errors !== priorErrors || messages !== priorMessages) {\n      return {\n        value: value !== priorValue ? value : stateValue,\n        priorValue: value,\n        errors: (errors !== priorErrors ? errors : stateErrors) || {},\n        priorErrors: errors,\n        messages: _extends({}, defaultMessages, {}, messages),\n        priorMessages: messages\n      };\n    }\n\n    return null;\n  };\n\n  var _proto = Form.prototype;\n\n  _proto.render = function render() {\n    var _this$props2 = this.props,\n        children = _this$props2.children,\n        rest = _objectWithoutPropertiesLoose(_this$props2, [\"children\"]);\n\n    delete rest.messages;\n    delete rest.theme;\n    delete rest.value;\n    var _this$state2 = this.state,\n        errors = _this$state2.errors,\n        touched = _this$state2.touched,\n        value = _this$state2.value,\n        messages = _this$state2.messages;\n    return React.createElement(\"form\", _extends({}, rest, {\n      onReset: this.onReset,\n      onSubmit: this.onSubmit\n    }), React.createElement(FormContext.Provider, {\n      value: {\n        addValidation: this.addValidation,\n        errors: errors,\n        messages: messages,\n        touched: touched,\n        update: this.update,\n        value: value\n      }\n    }, children));\n  };\n\n  return Form;\n}(Component);\n\n_defineProperty(Form, \"defaultProps\", {\n  messages: defaultMessages,\n  value: {}\n});\n\nObject.setPrototypeOf(Form.defaultProps, defaultProps);\nvar FormDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  FormDoc = require('./doc').doc(Form); // eslint-disable-line global-require\n}\n\nvar FormWrapper = FormDoc || Form;\nFormWrapper.displayName = 'Form';\nexport { FormWrapper as Form };"]},"metadata":{},"sourceType":"module"}