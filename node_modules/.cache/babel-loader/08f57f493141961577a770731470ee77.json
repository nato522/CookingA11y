{"ast":null,"code":"function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { Component } from 'react';\nimport { compose } from 'recompose';\nimport { withTheme } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates, updateDateRange } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar buildStartEnd = function buildStartEnd(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return {\n    start: start,\n    end: end\n  };\n};\n\nvar buildState = function buildState(props) {\n  var date = props.date,\n      dates = props.dates,\n      firstDayOfWeek = props.firstDayOfWeek,\n      reference = props.reference;\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n    }\n  } else {\n    normalizedReference = new Date();\n  }\n\n  return _extends({}, buildStartEnd(normalizedReference, firstDayOfWeek), {\n    reference: normalizedReference\n  });\n};\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Calendar, _Component);\n\n  function Calendar() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"dayRefs\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSlideStateLater\", function () {\n      clearTimeout(_this.timer);\n      _this.timer = setTimeout(function () {\n        var targetStartEnd = _this.state.targetStartEnd;\n\n        if (targetStartEnd) {\n          _this.setState({\n            start: targetStartEnd.start,\n            end: targetStartEnd.end,\n            targetStartEnd: undefined,\n            slide: undefined\n          });\n        } // Wait for animation to finish before cleaning up.\n        // Empirically determined.\n\n      }, 800);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setReference\", function (reference) {\n      var _this$props = _this.props,\n          animate = _this$props.animate,\n          bounds = _this$props.bounds,\n          firstDayOfWeek = _this$props.firstDayOfWeek,\n          onReference = _this$props.onReference;\n      var _this$state = _this.state,\n          start = _this$state.start,\n          end = _this$state.end,\n          targetStartEnd = _this$state.targetStartEnd;\n\n      if (betweenDates(reference, bounds)) {\n        var nextStartEnd = buildStartEnd(reference, firstDayOfWeek);\n        var nextState = {\n          reference: reference\n        }; // if we're changing too fast, bypass animation\n\n        if (!animate || targetStartEnd) {\n          nextState.targetStartEnd = nextStartEnd;\n          nextState.start = nextStartEnd.start;\n          nextState.end = nextStartEnd.end;\n          nextState.targetStartEnd = undefined;\n          nextState.slide = undefined;\n        } else {\n          nextState.targetStartEnd = nextStartEnd;\n\n          if (nextStartEnd.start.getTime() < start.getTime()) {\n            nextState.start = nextStartEnd.start;\n            nextState.slide = {\n              direction: 'down',\n              weeks: daysApart(start, nextStartEnd.start) / 7\n            };\n          } else if (nextStartEnd.end.getTime() > end.getTime()) {\n            nextState.end = nextStartEnd.end;\n            nextState.slide = {\n              direction: 'up',\n              weeks: daysApart(nextStartEnd.end, end) / 7\n            };\n          }\n        }\n\n        _this.clearSlideStateLater();\n\n        _this.setState(nextState, function () {\n          if (onReference) {\n            onReference(reference.toISOString());\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function (day) {\n      return function () {\n        var bounds = _this.props.bounds;\n        var reference = _this.state.reference;\n\n        if (betweenDates(day, bounds)) {\n          _this.setState({\n            focused: day\n          }, function () {\n            if (day.getMonth() !== reference.getMonth()) {\n              _this.setReference(day);\n            }\n          });\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickDay\", function (dateString) {\n      return function () {\n        var _this$props2 = _this.props,\n            onSelect = _this$props2.onSelect,\n            range = _this$props2.range;\n\n        if (range) {\n          var nextState = updateDateRange(dateString, _this.state);\n\n          _this.setState(nextState);\n\n          if (onSelect) {\n            onSelect(nextState.dates || nextState.date || undefined);\n          }\n        } else if (onSelect) {\n          onSelect(dateString);\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setFocus\", function (day) {\n      var ref = _this.dayRefs[day.toISOString()];\n\n      if (ref && ref.current) {\n        ref.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCalendarHeader\", function (previousMonth, nextMonth) {\n      var _this$props3 = _this.props,\n          bounds = _this$props3.bounds,\n          locale = _this$props3.locale,\n          size = _this$props3.size,\n          theme = _this$props3.theme;\n      var reference = _this.state.reference;\n      var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n      var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n      return React.createElement(Box, {\n        direction: \"row\",\n        justify: \"between\",\n        align: \"center\"\n      }, React.createElement(Box, {\n        flex: true,\n        pad: {\n          horizontal: headingPadMap[size] || 'small'\n        }\n      }, React.createElement(Heading, {\n        level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n        size: size,\n        margin: \"none\"\n      }, reference.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }))), React.createElement(Box, {\n        flex: false,\n        direction: \"row\",\n        align: \"center\"\n      }, React.createElement(Button, {\n        a11yTitle: previousMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        }),\n        icon: React.createElement(PreviousIcon, {\n          size: size !== 'small' ? size : undefined\n        }),\n        disabled: !betweenDates(previousMonth, bounds),\n        onClick: function onClick() {\n          return _this.setReference(previousMonth);\n        }\n      }), React.createElement(Button, {\n        a11yTitle: nextMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        }),\n        icon: React.createElement(NextIcon, {\n          size: size !== 'small' ? size : undefined\n        }),\n        disabled: !betweenDates(nextMonth, bounds),\n        onClick: function onClick() {\n          return _this.setReference(nextMonth);\n        }\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderDaysOfWeek\", function (locale, size, start) {\n      var day = new Date(start);\n      var days = [];\n\n      while (days.length < 7) {\n        days.push(React.createElement(StyledDayContainer, {\n          key: days.length,\n          sizeProp: size\n        }, React.createElement(StyledDay, {\n          otherMonth: true,\n          sizeProp: size\n        }, day.toLocaleDateString(locale, {\n          weekday: 'narrow'\n        }))));\n        day = addDays(day, 1);\n      }\n\n      return React.createElement(StyledWeek, null, days);\n    });\n\n    return _this;\n  }\n\n  Calendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var reference = nextProps.reference;\n    var prevReference = prevState.reference;\n\n    if (Object.prototype.hasOwnProperty.call(nextProps, 'date') || Object.prototype.hasOwnProperty.call(nextProps, 'dates') || !prevReference || reference) {\n      var state = {};\n\n      if (Object.prototype.hasOwnProperty.call(nextProps, 'date') || Object.prototype.hasOwnProperty.call(nextProps, 'dates')) {\n        state.date = nextProps.date;\n        state.dates = nextProps.dates;\n      }\n\n      if (!prevReference || reference) {\n        state = _extends({}, state, {}, buildState(nextProps));\n      }\n\n      return state;\n    }\n\n    return null;\n  };\n\n  var _proto = Calendar.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    var focused = this.state.focused;\n\n    if (focused) {\n      var ref = this.dayRefs[focused.toISOString()];\n\n      if (ref && ref.current && ref.current !== document.activeElement) {\n        ref.current.focus();\n      }\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    clearTimeout(this.timer);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        bounds = _this$props4.bounds,\n        dateProp = _this$props4.date,\n        datesProp = _this$props4.dates,\n        disabled = _this$props4.disabled,\n        daysOfWeek = _this$props4.daysOfWeek,\n        firstDayOfWeek = _this$props4.firstDayOfWeek,\n        header = _this$props4.header,\n        locale = _this$props4.locale,\n        onReference = _this$props4.onReference,\n        onSelect = _this$props4.onSelect,\n        range = _this$props4.range,\n        showAdjacentDays = _this$props4.showAdjacentDays,\n        size = _this$props4.size,\n        theme = _this$props4.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props4, [\"bounds\", \"date\", \"dates\", \"disabled\", \"daysOfWeek\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"showAdjacentDays\", \"size\", \"theme\"]);\n\n    var _this$state2 = this.state,\n        date = _this$state2.date,\n        dates = _this$state2.dates,\n        focused = _this$state2.focused,\n        start = _this$state2.start,\n        reference = _this$state2.reference,\n        end = _this$state2.end,\n        slide = _this$state2.slide; // We have to deal with reference being the end of a month with more\n    // days than the month we are changing to. So, we always set reference\n    // to the first of the month before changing the month.\n\n    var previousMonth = endOfMonth(subtractMonths(startOfMonth(reference), 1));\n    var nextMonth = startOfMonth(addMonths(startOfMonth(reference), 1));\n    var weeks = [];\n    var day = new Date(start);\n    var days;\n    this.dayRefs = {};\n\n    while (day.getTime() < end.getTime()) {\n      if (day.getDay() === firstDayOfWeek) {\n        if (days) {\n          weeks.push(React.createElement(StyledWeek, {\n            key: day.getTime()\n          }, days));\n        }\n\n        days = [];\n      }\n\n      var otherMonth = day.getMonth() !== reference.getMonth();\n\n      if (!showAdjacentDays && otherMonth) {\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(StyledDay, {\n          sizeProp: size\n        })));\n      } else {\n        var dateString = day.toISOString();\n        this.dayRefs[dateString] = React.createRef();\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || bounds && !betweenDates(day, bounds);\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(Button, {\n          ref: this.dayRefs[dateString],\n          a11yTitle: day.toDateString(),\n          plain: true,\n          hoverIndicator: !dayDisabled,\n          disabled: dayDisabled,\n          onClick: this.onClickDay(dateString),\n          onFocus: this.onFocus(day),\n          onBlur: function onBlur() {\n            return _this2.setState({\n              focused: false\n            });\n          }\n        }, React.createElement(StyledDay, {\n          inRange: inRange,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          isSelected: selected,\n          sizeProp: size\n        }, day.getDate()))));\n      }\n\n      day = addDays(day, 1);\n    }\n\n    weeks.push(React.createElement(StyledWeek, {\n      key: day.getTime()\n    }, days));\n    return React.createElement(StyledCalendar, _extends({\n      sizeProp: size\n    }, rest), React.createElement(Keyboard, {\n      onUp: function onUp(event) {\n        event.preventDefault();\n\n        _this2.setFocus(addDays(focused, -7));\n      },\n      onDown: function onDown(event) {\n        event.preventDefault();\n\n        _this2.setFocus(addDays(focused, 7));\n      },\n      onLeft: function onLeft() {\n        return focused && _this2.setFocus(addDays(focused, -1));\n      },\n      onRight: function onRight() {\n        return focused && _this2.setFocus(addDays(focused, 1));\n      }\n    }, React.createElement(Box, null, header ? header({\n      date: reference,\n      locale: locale,\n      onPreviousMonth: function onPreviousMonth() {\n        return _this2.setReference(previousMonth);\n      },\n      onNextMonth: function onNextMonth() {\n        return _this2.setReference(nextMonth);\n      },\n      previousInBound: betweenDates(previousMonth, bounds),\n      nextInBound: betweenDates(nextMonth, bounds)\n    }) : this.renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && this.renderDaysOfWeek(locale, size, start), React.createElement(StyledWeeksContainer, {\n      sizeProp: size\n    }, React.createElement(StyledWeeks, {\n      slide: slide,\n      sizeProp: size\n    }, weeks)))));\n  };\n\n  return Calendar;\n}(Component);\n\n_defineProperty(Calendar, \"defaultProps\", {\n  animate: true,\n  firstDayOfWeek: 0,\n  size: 'medium',\n  locale: 'en-US',\n  showAdjacentDays: true\n});\n\nObject.setPrototypeOf(Calendar.defaultProps, defaultProps);\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = compose(withTheme)(CalendarDoc || Calendar);\nexport { CalendarWrapper as Calendar };","map":{"version":3,"sources":["C:/Users/ruxan/OneDrive/Desktop/UPM/Website/go_bananas/node_modules/grommet/es6/components/Calendar/Calendar.js"],"names":["_objectWithoutPropertiesLoose","source","excluded","target","sourceKeys","Object","keys","key","i","length","indexOf","_assertThisInitialized","self","ReferenceError","_inheritsLoose","subClass","superClass","prototype","create","constructor","__proto__","_defineProperty","obj","value","defineProperty","enumerable","configurable","writable","_extends","assign","arguments","hasOwnProperty","call","apply","React","Component","compose","withTheme","defaultProps","Box","Button","Heading","Keyboard","StyledCalendar","StyledDay","StyledDayContainer","StyledWeek","StyledWeeks","StyledWeeksContainer","addDays","addMonths","betweenDates","daysApart","endOfMonth","startOfMonth","subtractDays","subtractMonths","withinDates","updateDateRange","headingPadMap","small","medium","large","buildStartEnd","reference","firstDayOfWeek","start","Date","setDate","getDay","end","buildState","props","date","dates","normalizedReference","Array","isArray","Calendar","_Component","_this","_len","args","_key","concat","clearTimeout","timer","setTimeout","targetStartEnd","state","setState","undefined","slide","_this$props","animate","bounds","onReference","_this$state","nextStartEnd","nextState","getTime","direction","weeks","clearSlideStateLater","toISOString","day","focused","getMonth","setReference","dateString","_this$props2","onSelect","range","ref","dayRefs","current","focus","previousMonth","nextMonth","_this$props3","locale","size","theme","PreviousIcon","calendar","icons","previous","NextIcon","next","createElement","justify","align","flex","pad","horizontal","level","heading","margin","toLocaleDateString","month","year","a11yTitle","icon","disabled","onClick","days","push","sizeProp","otherMonth","weekday","getDerivedStateFromProps","nextProps","prevState","prevReference","_proto","componentDidUpdate","document","activeElement","componentWillUnmount","render","_this2","_this$props4","dateProp","datesProp","daysOfWeek","header","showAdjacentDays","rest","_this$state2","createRef","selected","inRange","selectedState","dayDisabled","toDateString","plain","hoverIndicator","onClickDay","onFocus","onBlur","isSelected","getDate","onUp","event","preventDefault","setFocus","onDown","onLeft","onRight","onPreviousMonth","onNextMonth","previousInBound","nextInBound","renderCalendarHeader","renderDaysOfWeek","setPrototypeOf","CalendarDoc","process","env","NODE_ENV","require","doc","CalendarWrapper"],"mappings":"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","sourcesContent":["function _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport { compose } from 'recompose';\nimport { withTheme } from 'styled-components';\nimport { defaultProps } from '../../default-props';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { Heading } from '../Heading';\nimport { Keyboard } from '../Keyboard';\nimport { StyledCalendar, StyledDay, StyledDayContainer, StyledWeek, StyledWeeks, StyledWeeksContainer } from './StyledCalendar';\nimport { addDays, addMonths, betweenDates, daysApart, endOfMonth, startOfMonth, subtractDays, subtractMonths, withinDates, updateDateRange } from './utils';\nvar headingPadMap = {\n  small: 'xsmall',\n  medium: 'small',\n  large: 'medium'\n};\n\nvar buildStartEnd = function buildStartEnd(reference, firstDayOfWeek) {\n  var start = new Date(reference);\n  start.setDate(1); // first of month\n  // In case Sunday is the first day of the month, and the user asked for Monday\n  // to be the first day of the week, then we need to include Sunday and six\n  // days prior.\n\n  start = start.getDay() === 0 && firstDayOfWeek === 1 ? start = subtractDays(start, 6) : // beginning of week\n  start = subtractDays(start, start.getDay() - firstDayOfWeek);\n  var end = addDays(start, 7 * 5 + 7); // 5 weeks to end of week\n\n  return {\n    start: start,\n    end: end\n  };\n};\n\nvar buildState = function buildState(props) {\n  var date = props.date,\n      dates = props.dates,\n      firstDayOfWeek = props.firstDayOfWeek,\n      reference = props.reference;\n  var normalizedReference;\n\n  if (reference) {\n    normalizedReference = new Date(reference);\n  } else if (date) {\n    normalizedReference = new Date(date);\n  } else if (dates && dates.length > 0) {\n    if (typeof dates[0] === 'string') {\n      normalizedReference = new Date(dates[0]);\n    } else if (Array.isArray(dates[0])) {\n      normalizedReference = new Date(dates[0][0]);\n    } else {\n      normalizedReference = new Date();\n    }\n  } else {\n    normalizedReference = new Date();\n  }\n\n  return _extends({}, buildStartEnd(normalizedReference, firstDayOfWeek), {\n    reference: normalizedReference\n  });\n};\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inheritsLoose(Calendar, _Component);\n\n  function Calendar() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _Component.call.apply(_Component, [this].concat(args)) || this;\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"dayRefs\", {});\n\n    _defineProperty(_assertThisInitialized(_this), \"clearSlideStateLater\", function () {\n      clearTimeout(_this.timer);\n      _this.timer = setTimeout(function () {\n        var targetStartEnd = _this.state.targetStartEnd;\n\n        if (targetStartEnd) {\n          _this.setState({\n            start: targetStartEnd.start,\n            end: targetStartEnd.end,\n            targetStartEnd: undefined,\n            slide: undefined\n          });\n        } // Wait for animation to finish before cleaning up.\n        // Empirically determined.\n\n      }, 800);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setReference\", function (reference) {\n      var _this$props = _this.props,\n          animate = _this$props.animate,\n          bounds = _this$props.bounds,\n          firstDayOfWeek = _this$props.firstDayOfWeek,\n          onReference = _this$props.onReference;\n      var _this$state = _this.state,\n          start = _this$state.start,\n          end = _this$state.end,\n          targetStartEnd = _this$state.targetStartEnd;\n\n      if (betweenDates(reference, bounds)) {\n        var nextStartEnd = buildStartEnd(reference, firstDayOfWeek);\n        var nextState = {\n          reference: reference\n        }; // if we're changing too fast, bypass animation\n\n        if (!animate || targetStartEnd) {\n          nextState.targetStartEnd = nextStartEnd;\n          nextState.start = nextStartEnd.start;\n          nextState.end = nextStartEnd.end;\n          nextState.targetStartEnd = undefined;\n          nextState.slide = undefined;\n        } else {\n          nextState.targetStartEnd = nextStartEnd;\n\n          if (nextStartEnd.start.getTime() < start.getTime()) {\n            nextState.start = nextStartEnd.start;\n            nextState.slide = {\n              direction: 'down',\n              weeks: daysApart(start, nextStartEnd.start) / 7\n            };\n          } else if (nextStartEnd.end.getTime() > end.getTime()) {\n            nextState.end = nextStartEnd.end;\n            nextState.slide = {\n              direction: 'up',\n              weeks: daysApart(nextStartEnd.end, end) / 7\n            };\n          }\n        }\n\n        _this.clearSlideStateLater();\n\n        _this.setState(nextState, function () {\n          if (onReference) {\n            onReference(reference.toISOString());\n          }\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onFocus\", function (day) {\n      return function () {\n        var bounds = _this.props.bounds;\n        var reference = _this.state.reference;\n\n        if (betweenDates(day, bounds)) {\n          _this.setState({\n            focused: day\n          }, function () {\n            if (day.getMonth() !== reference.getMonth()) {\n              _this.setReference(day);\n            }\n          });\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClickDay\", function (dateString) {\n      return function () {\n        var _this$props2 = _this.props,\n            onSelect = _this$props2.onSelect,\n            range = _this$props2.range;\n\n        if (range) {\n          var nextState = updateDateRange(dateString, _this.state);\n\n          _this.setState(nextState);\n\n          if (onSelect) {\n            onSelect(nextState.dates || nextState.date || undefined);\n          }\n        } else if (onSelect) {\n          onSelect(dateString);\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setFocus\", function (day) {\n      var ref = _this.dayRefs[day.toISOString()];\n\n      if (ref && ref.current) {\n        ref.current.focus();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCalendarHeader\", function (previousMonth, nextMonth) {\n      var _this$props3 = _this.props,\n          bounds = _this$props3.bounds,\n          locale = _this$props3.locale,\n          size = _this$props3.size,\n          theme = _this$props3.theme;\n      var reference = _this.state.reference;\n      var PreviousIcon = size === 'small' ? theme.calendar.icons.small.previous : theme.calendar.icons.previous;\n      var NextIcon = size === 'small' ? theme.calendar.icons.small.next : theme.calendar.icons.next;\n      return React.createElement(Box, {\n        direction: \"row\",\n        justify: \"between\",\n        align: \"center\"\n      }, React.createElement(Box, {\n        flex: true,\n        pad: {\n          horizontal: headingPadMap[size] || 'small'\n        }\n      }, React.createElement(Heading, {\n        level: size === 'small' ? theme.calendar.heading && theme.calendar.heading.level || 4 : (theme.calendar.heading && theme.calendar.heading.level || 4) - 1,\n        size: size,\n        margin: \"none\"\n      }, reference.toLocaleDateString(locale, {\n        month: 'long',\n        year: 'numeric'\n      }))), React.createElement(Box, {\n        flex: false,\n        direction: \"row\",\n        align: \"center\"\n      }, React.createElement(Button, {\n        a11yTitle: previousMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        }),\n        icon: React.createElement(PreviousIcon, {\n          size: size !== 'small' ? size : undefined\n        }),\n        disabled: !betweenDates(previousMonth, bounds),\n        onClick: function onClick() {\n          return _this.setReference(previousMonth);\n        }\n      }), React.createElement(Button, {\n        a11yTitle: nextMonth.toLocaleDateString(locale, {\n          month: 'long',\n          year: 'numeric'\n        }),\n        icon: React.createElement(NextIcon, {\n          size: size !== 'small' ? size : undefined\n        }),\n        disabled: !betweenDates(nextMonth, bounds),\n        onClick: function onClick() {\n          return _this.setReference(nextMonth);\n        }\n      })));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderDaysOfWeek\", function (locale, size, start) {\n      var day = new Date(start);\n      var days = [];\n\n      while (days.length < 7) {\n        days.push(React.createElement(StyledDayContainer, {\n          key: days.length,\n          sizeProp: size\n        }, React.createElement(StyledDay, {\n          otherMonth: true,\n          sizeProp: size\n        }, day.toLocaleDateString(locale, {\n          weekday: 'narrow'\n        }))));\n        day = addDays(day, 1);\n      }\n\n      return React.createElement(StyledWeek, null, days);\n    });\n\n    return _this;\n  }\n\n  Calendar.getDerivedStateFromProps = function getDerivedStateFromProps(nextProps, prevState) {\n    var reference = nextProps.reference;\n    var prevReference = prevState.reference;\n\n    if (Object.prototype.hasOwnProperty.call(nextProps, 'date') || Object.prototype.hasOwnProperty.call(nextProps, 'dates') || !prevReference || reference) {\n      var state = {};\n\n      if (Object.prototype.hasOwnProperty.call(nextProps, 'date') || Object.prototype.hasOwnProperty.call(nextProps, 'dates')) {\n        state.date = nextProps.date;\n        state.dates = nextProps.dates;\n      }\n\n      if (!prevReference || reference) {\n        state = _extends({}, state, {}, buildState(nextProps));\n      }\n\n      return state;\n    }\n\n    return null;\n  };\n\n  var _proto = Calendar.prototype;\n\n  _proto.componentDidUpdate = function componentDidUpdate() {\n    var focused = this.state.focused;\n\n    if (focused) {\n      var ref = this.dayRefs[focused.toISOString()];\n\n      if (ref && ref.current && ref.current !== document.activeElement) {\n        ref.current.focus();\n      }\n    }\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    clearTimeout(this.timer);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    var _this$props4 = this.props,\n        bounds = _this$props4.bounds,\n        dateProp = _this$props4.date,\n        datesProp = _this$props4.dates,\n        disabled = _this$props4.disabled,\n        daysOfWeek = _this$props4.daysOfWeek,\n        firstDayOfWeek = _this$props4.firstDayOfWeek,\n        header = _this$props4.header,\n        locale = _this$props4.locale,\n        onReference = _this$props4.onReference,\n        onSelect = _this$props4.onSelect,\n        range = _this$props4.range,\n        showAdjacentDays = _this$props4.showAdjacentDays,\n        size = _this$props4.size,\n        theme = _this$props4.theme,\n        rest = _objectWithoutPropertiesLoose(_this$props4, [\"bounds\", \"date\", \"dates\", \"disabled\", \"daysOfWeek\", \"firstDayOfWeek\", \"header\", \"locale\", \"onReference\", \"onSelect\", \"range\", \"showAdjacentDays\", \"size\", \"theme\"]);\n\n    var _this$state2 = this.state,\n        date = _this$state2.date,\n        dates = _this$state2.dates,\n        focused = _this$state2.focused,\n        start = _this$state2.start,\n        reference = _this$state2.reference,\n        end = _this$state2.end,\n        slide = _this$state2.slide; // We have to deal with reference being the end of a month with more\n    // days than the month we are changing to. So, we always set reference\n    // to the first of the month before changing the month.\n\n    var previousMonth = endOfMonth(subtractMonths(startOfMonth(reference), 1));\n    var nextMonth = startOfMonth(addMonths(startOfMonth(reference), 1));\n    var weeks = [];\n    var day = new Date(start);\n    var days;\n    this.dayRefs = {};\n\n    while (day.getTime() < end.getTime()) {\n      if (day.getDay() === firstDayOfWeek) {\n        if (days) {\n          weeks.push(React.createElement(StyledWeek, {\n            key: day.getTime()\n          }, days));\n        }\n\n        days = [];\n      }\n\n      var otherMonth = day.getMonth() !== reference.getMonth();\n\n      if (!showAdjacentDays && otherMonth) {\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(StyledDay, {\n          sizeProp: size\n        })));\n      } else {\n        var dateString = day.toISOString();\n        this.dayRefs[dateString] = React.createRef();\n        var selected = false;\n        var inRange = false;\n        var selectedState = withinDates(day, date || dates);\n\n        if (selectedState === 2) {\n          selected = true;\n        } else if (selectedState === 1) {\n          inRange = true;\n        }\n\n        var dayDisabled = withinDates(day, disabled) || bounds && !betweenDates(day, bounds);\n        days.push(React.createElement(StyledDayContainer, {\n          key: day.getTime(),\n          sizeProp: size\n        }, React.createElement(Button, {\n          ref: this.dayRefs[dateString],\n          a11yTitle: day.toDateString(),\n          plain: true,\n          hoverIndicator: !dayDisabled,\n          disabled: dayDisabled,\n          onClick: this.onClickDay(dateString),\n          onFocus: this.onFocus(day),\n          onBlur: function onBlur() {\n            return _this2.setState({\n              focused: false\n            });\n          }\n        }, React.createElement(StyledDay, {\n          inRange: inRange,\n          otherMonth: day.getMonth() !== reference.getMonth(),\n          isSelected: selected,\n          sizeProp: size\n        }, day.getDate()))));\n      }\n\n      day = addDays(day, 1);\n    }\n\n    weeks.push(React.createElement(StyledWeek, {\n      key: day.getTime()\n    }, days));\n    return React.createElement(StyledCalendar, _extends({\n      sizeProp: size\n    }, rest), React.createElement(Keyboard, {\n      onUp: function onUp(event) {\n        event.preventDefault();\n\n        _this2.setFocus(addDays(focused, -7));\n      },\n      onDown: function onDown(event) {\n        event.preventDefault();\n\n        _this2.setFocus(addDays(focused, 7));\n      },\n      onLeft: function onLeft() {\n        return focused && _this2.setFocus(addDays(focused, -1));\n      },\n      onRight: function onRight() {\n        return focused && _this2.setFocus(addDays(focused, 1));\n      }\n    }, React.createElement(Box, null, header ? header({\n      date: reference,\n      locale: locale,\n      onPreviousMonth: function onPreviousMonth() {\n        return _this2.setReference(previousMonth);\n      },\n      onNextMonth: function onNextMonth() {\n        return _this2.setReference(nextMonth);\n      },\n      previousInBound: betweenDates(previousMonth, bounds),\n      nextInBound: betweenDates(nextMonth, bounds)\n    }) : this.renderCalendarHeader(previousMonth, nextMonth), daysOfWeek && this.renderDaysOfWeek(locale, size, start), React.createElement(StyledWeeksContainer, {\n      sizeProp: size\n    }, React.createElement(StyledWeeks, {\n      slide: slide,\n      sizeProp: size\n    }, weeks)))));\n  };\n\n  return Calendar;\n}(Component);\n\n_defineProperty(Calendar, \"defaultProps\", {\n  animate: true,\n  firstDayOfWeek: 0,\n  size: 'medium',\n  locale: 'en-US',\n  showAdjacentDays: true\n});\n\nObject.setPrototypeOf(Calendar.defaultProps, defaultProps);\nvar CalendarDoc;\n\nif (process.env.NODE_ENV !== 'production') {\n  // eslint-disable-next-line global-require\n  CalendarDoc = require('./doc').doc(Calendar);\n}\n\nvar CalendarWrapper = compose(withTheme)(CalendarDoc || Calendar);\nexport { CalendarWrapper as Calendar };"]},"metadata":{},"sourceType":"module"}